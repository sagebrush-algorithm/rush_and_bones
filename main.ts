enum ActionKind {
    Walking,
    Idle,
    Jumping,
    Skating,
    Flying
}
namespace SpriteKind {
    export const Ground = SpriteKind.create()
    export const Cloud = SpriteKind.create()
    export const Bat = SpriteKind.create()
    export const Tree = SpriteKind.create()
    export const TOmb = SpriteKind.create()
    export const RandomTree = SpriteKind.create()
    export const RandomTree2 = SpriteKind.create()
}
function initGround () {
    ground1 = sprites.create(img`
        ...................................................................................ffff...........................................................................
        ..................................................................................f....f..........................................................................
        ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff......fffffffffffffffff....fffffffffffffffffffffffffffffffffffffffffffffffffffff
        .........................................................................................................ffff.....................................................
        ..................................................................................................................................................................
        ..ffff..f.......................f..ffff.........................ffff..f.............f..........................ffff..f...........f..fff.................f..fff....
        ..................................................................................................................................................................
        ...............ffff..f.........................ffff.f.......f..............ff.f........ffff..f.....ffff..f..................f...............ffff..f...............
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        `, SpriteKind.Ground)
    ground2 = sprites.create(img`
        .....................................................ffff..................ffff...................................................................................
        ....................................................f....f................f....f..................................................................................
        ffffffffffffffffffffffffffffffffffffffffffffffffffff......ffffffffffffffff......ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ....fff..f.................fff..f...........f..ffff..........................f.............f..ffff.........................ffff..f.......................f..ffff..
        ..................................................................................................................................................................
        ...............f..ffff...............f..................f..ffff.....f..ffff........f.ff..............f.......f.ffff.........................f..ffff...............
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        ..................................................................................................................................................................
        `, SpriteKind.Ground)
    ground2.setPosition(0, 120)
    ground1.setPosition(0, 120)
    ground1.vx = -100
    ground2.vx = -100
    ground1.x = 2
    ground2.x = 2
}
controller.anyButton.onEvent(ControllerButtonEvent.Pressed, function () {
    if (Bones.y == 94 && End == 0) {
        Bones.vy = -160
        music.baDing.play()
        animation.setAction(Bones, ActionKind.Jumping)
    }
})
function initBones () {
    Bones = sprites.create(img`
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ...............fffffff..........
        ..............f1111111f.........
        .............f11f11f11f.........
        .............f11ff1ff1f.........
        .............f11ff1ff1f.........
        .............f11111111f.........
        .............f11111111f.........
        .............ff11f1111f.........
        ...............f111111f.........
        ................ffffff..........
        ........................f.......
        ...............ffffffffff.......
        .............ff.ff111f..........
        ................ffffff..........
        .................f111f..........
        .................fffff..........
        .................f...f..........
        .................f...ff.........
        ................ff..............
        .............fffffffffff........
        ..............ff.....ff.........
        `, SpriteKind.Player)
    Skate = animation.createAnimation(ActionKind.Skating, 1000)
    Skate.addAnimationFrame(img`
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ...............fffffff..........
        ..............f1111111f.........
        .............f11f11f11f.........
        .............f11ff1ff1f.........
        .............f11ff1ff1f.........
        .............f11111111f.........
        .............f11f11111f.........
        .............ff11f1111f.........
        ...............f111111f.........
        ................ffffff..........
        ............fff.................
        ...............ffffffff.........
        ................ff111f.ff.......
        ................ffffff..........
        .................f111f..........
        .................fffff..........
        ...............fff...ff.........
        .............fffffffffff........
        ..............ff.....ff.........
        `)
    Skate.addAnimationFrame(img`
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ...............fffffff..........
        ..............f1111111f.........
        .............f11111111f.........
        .............f11ff1ff1f.........
        .............f11ff1ff1f.........
        .............f11111111f.........
        .............f11f11111f.........
        .............ff11ff111f.........
        ...............f111111f.........
        ................ffffff..........
        .......................ff.......
        ...............ffffffff.........
        ............fff.ff111f..........
        ................ffffff..........
        .................f111f..........
        .................fffff..........
        .............fffffffffff........
        ..............ff.f...ff.........
        `)
    animation.attachAnimation(Bones, Skate)
    Jump = animation.createAnimation(ActionKind.Jumping, 200)
    Jump.addAnimationFrame(img`
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ...............fffffff..........
        ..............f1111111f.........
        .............f11111111f.........
        .............f11ff1ff1f.........
        .............f11ff1ff1f.........
        .............f11111111f.........
        .............f11f11111f.........
        .............ff11ff111f.........
        ...............f111111f.........
        ............f...ffffff...f......
        .............f..........f.......
        ..............ffffffffff........
        ................ff111f..........
        .................fffff..........
        .................f111f..........
        .................fffff..........
        .................f...f..........
        ................ff...ff.........
        ................................
        .............fffffffffff........
        ..............ff.....ff.........
        `)
    animation.attachAnimation(Bones, Jump)
    Dead = animation.createAnimation(ActionKind.Walking, 200)
    Dead.addAnimationFrame(img`
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ...............fffffff..........
        ..............f1111111f.........
        .............f11111111f.........
        .............f11f111f1f.........
        .............f1fff1ffff.........
        .............f11f111f1f.........
        .............f11111111f.........
        .............ff1111111f.........
        ...............f111111f.........
        ................ffffff..........
        ................................
        ...............ffffffff.........
        ..............f.ff111f.f........
        ..............f.ffffff.f........
        ..............f..f111f.f........
        .................fffff..........
        ................ff...ff.........
        .............fffffffffff........
        ..............ff.....ff.........
        `)
    Dead.addAnimationFrame(img`
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ...............fffffff..........
        ..............f1111111f.........
        .............f11111111f.........
        .............f11f111f1f.........
        .............f1fff1ffff.........
        .............f11f111f1f.........
        .............f11111111f.........
        .............ff1111111f.........
        ...............f111111f.........
        ..............f.ffffff.f........
        ..............f.ffffff.f........
        ..............f..f111f.f........
        .................fffff..........
        ................ff...ff.........
        .............fffffffffff........
        ..............ff.....ff.........
        `)
    Dead.addAnimationFrame(img`
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ...............fffffff..........
        ..............f1111111f.........
        .............f11111111f.........
        .............f11f111f1f.........
        .............f1fff1ffff.........
        .............f11f111f1f.........
        .............f11111111f.........
        .............ff1111111f.........
        ...............f111111f.........
        ................fffffff.........
        .............fffffffffff........
        ..............f.......f.........
        `)
    animation.attachAnimation(Bones, Dead)
    Bones.x = 3
    Bones.setPosition(15, 94)
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.Projectile, function (sprite, otherSprite) {
    End = 1
    animation.setAction(Bones, ActionKind.Walking)
    pause(200)
    game.over(false, effects.melt)
})
let Cloud: Sprite = null
let Tomb: Sprite = null
let Choice = 0
let Fly: animation.Animation = null
let Bat: Sprite = null
let Dead: animation.Animation = null
let Jump: animation.Animation = null
let Skate: animation.Animation = null
let Bones: Sprite = null
let ground2: Sprite = null
let ground1: Sprite = null
let End = 0
let Idle = null
game.setDialogCursor(img`
    ................................
    ................................
    ................................
    ................................
    .............1111111............
    ............1fffffff1...........
    ...........1f1111111f1..........
    ..........1f11f11f11f1..........
    ..........1f11ff1ff1f1..........
    ..........1f11ff1ff1f1..........
    ..........1f11111111f1..........
    ..........1f11111111f1..........
    ..........1ff11f1111f1..........
    ..........111f111111f1..........
    .............1ffffff1111........
    .............111111111f1........
    ..........111ffffffffff1........
    ..........1ff1ff111f1111........
    ..........1111ffffff11..........
    ..........11111f111f11..........
    ..............1fffff11..........
    ..............1f111f11..........
    ..............1f111ff1..........
    ..........1111ff11111111........
    ..........1fffffffffff11........
    ..........11ff11111ff111........
    ................................
    ................................
    ................................
    ................................
    ................................
    ................................
    `)
game.splash("Rush & Bones")
scene.setBackgroundColor(1)
initGround()
initBones()
let score = 0
End = 0
game.showLongText("Press any button to jump", DialogLayout.Top)
game.onUpdate(function () {
    if (Bones.y < 94) {
        Bones.ay = 400
    } else {
        Bones.ay = 0
        Bones.y = 94
        if (End == 0) {
            animation.setAction(Bones, ActionKind.Skating)
        }
    }
})
game.onUpdateInterval(50, function () {
    info.changeScoreBy(1)
})
game.onUpdateInterval(2000, function () {
    if (Math.percentChance(20)) {
        Bat = sprites.createProjectileFromSide(img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ..........f.f..fff..............
            ......fff.fff.fff...............
            .......fff.11fff................
            ........fffffff.................
            .........fffff..................
            ..........f..f..................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `, ground1.vx / 2, 0)
        Fly = animation.createAnimation(ActionKind.Flying, 200)
        Fly.addAnimationFrame(img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ..........f.f..fff..............
            ......fff.fff.fff...............
            .......fff.11fff................
            ........fffffff.................
            .........fffff..................
            ..........f..f..................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `)
        Fly.addAnimationFrame(img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ...............fff..............
            ......fff.f.f.fff...............
            .......ffffff.ff................
            ........ff.11ff.................
            .........fffff..................
            ..........ffff..................
            ..........f..f..................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `)
        animation.attachAnimation(Bat, Fly)
        animation.setAction(Bat, ActionKind.Flying)
        Bat.y = randint(60, 70)
        Bat.setKind(SpriteKind.Bat)
        Bat.x = 160
    }
})
game.onUpdateInterval(1000, function () {
    Choice = randint(0, 4)
    if (Choice == 0) {
        Tomb = sprites.createProjectileFromSprite(img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            .............ffffff.............
            ...........fff1111fff...........
            ..........f1111111111f..........
            ..........f1111111111f..........
            .........ff1111ff1111ff.........
            .........f1111f11f1111f.........
            .........f1111f11f1111f.........
            .........f1111f11f1111f.........
            .........f1111f11f1111f.........
            .........f11111ff11111f.........
            .........f111111111111f.........
            .........f111ffffff111f.........
            .........f111f1111f111f.........
            .........f111ffffff111f.........
            .........f111111111111f.........
            .........f111ffffff111f.........
            .........f111f1111f111f.........
            .........f111ffffff111f.........
            .........ffffffffffffff.........
            ........f11111111111111f........
            `, Tomb, ground1.vx, 0)
        Tomb.y = 94
        Tomb.x = 160
    } else if (Choice == 1) {
        Tomb = sprites.createProjectileFromSide(img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            .............ffffff.............
            .............f....f.............
            .............f....f.............
            .............ff.f.f.............
            .............f....f.............
            .............ffffff.............
            .............f....f.............
            .............ffffff.............
            ........ffffff....f.............
            .........f...f.ffff.............
            ..........f..f..f.f.............
            .............f...ff.............
            .............f....f.............
            .............f....f.............
            .............ffffff.............
            .............ff..ff.............
            .............f....f.............
            .............ff...ff............
            .............f.f..f.f...........
            .............f....f.............
            `, ground1.vx, 0)
        Tomb.y = 94
        Tomb.x = 160
    } else {
        Tomb = sprites.createProjectileFromSide(img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ..........fff...................
            .........ff1ff....fff...........
            ........ff111ff..f111f..........
            ........f11111f.f11111f.........
            ........f1fff1f.f11111f.........
            ........f1f1f1f.f1fff1f.........
            ........f1f1f1f.f1f1f1f.........
            ........f1f1f1f.f1f1f1f.........
            ........f1fff1f.f1fff1f.........
            ........f11111f.f11111f.........
            ........f11111f.f11111f.........
            `, ground1.vx, 0)
        Tomb.x = 160
        Tomb.y = 94
    }
})
game.onUpdateInterval(1000, function () {
    ground1.vx += -1
    ground2.vx += -1
})
game.onUpdateInterval(1500, function () {
    if (Math.percentChance(40)) {
        Cloud = sprites.createProjectileFromSide(img`
            ................................
            ................................
            ................................
            ................................
            ................................
            ................ffff.ff.........
            ...............ff.....f.........
            .............fff......fff.......
            .............f..........ffff....
            .............f.............f....
            ..........ffff.............fff..
            .........ff..................f..
            .....fffff...................ff.
            .....f........................f.
            .ff.ff..f......................f
            ff.......fffffffffffffffffffffff
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            ................................
            `, ground1.vx / 4, 0)
        Cloud.y = randint(20, 50)
        Cloud.setKind(SpriteKind.Cloud)
        Cloud.x = 160
    }
})
forever(function () {
    if (ground2.x < -1 * (scene.screenWidth() / 2)) {
        ground2.x = ground1.x + scene.screenWidth()
    }
})
forever(function () {
    if (ground1.x < -1 * (scene.screenWidth() / 2)) {
        ground1.x = ground2.x + scene.screenWidth()
    }
})
